{% extends "shop/layouts/main.html" %}
{% load static %}

{% block title %}
<title>majestic | Landing, Ecommerce &amp; Business Template</title>
{% endblock title %}

{% block content %}
{% include "shop/includes/navbar.html" %}

<div class="bg-holder overlay overlay-light"
     style="background-image: url('{% static 'images/gallery/header-bg.png' %}'); background-size: cover;">
</div>

{% for subcategory in subcategories %}
<section class="py-6">
    <div class="container">
        <div class="row h-100">

            <div class="col-lg-7 mb-6">
                <h5 class="fs-3 fs-lg-5 lh-sm mb-3">{{ subcategory.name|capfirst }}</h5>
                <hr style="background-color:red; padding:2px; width: 10%"/>
            </div>

            <div class="col-12">
                <div class="carousel slide" id="carouselNewArrivals" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        {% if subcategory.limited_products|slice:"0:4" %}
                        <div class="carousel-item active" data-bs-interval="10000">
                            <div class="row h-100 align-items-center g-2">
                                {% for product in subcategory.limited_products|slice:"0:4" %}
                                <div class="col-sm-6 col-md-3 mb-3 mb-md-0 h-100">
                                    <div class="card card-span h-100 t ext-white"><img class="card-img"
                                                                                       src="{% static product.product_image %}"
                                                                                       alt="..."/>
                                        <div class="card-img-overlay"></div>
                                        <div class="card-body bg-200">
                                            <h5 class="fw-bold text-1000 text-truncate">{{ product.name }}</h5>
                                        </div>
                                        <p class="cart-text m-2">{{ product.description }}</p>
                                        <h6 class='m-2 text-danger'>Current price: Rs. <s>{{ product.original_price }}</s></h6>
                                        <h5 class='m-2 text-info'>Selling price: Rs. {{ product.selling_price }} </h5>
                                    </div>
                                    <a class="stretched-link" href="{% url 'product' product.id %}"></a>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% else %}
                        <div class="carousel-item active">
                            <div class="row h-100 align-items-center g-2 p-3">
                                Products will come soon...
                            </div>
                        </div>
                        {% endif %}

                        {% if subcategory.limited_products|slice:"4:8" %}
                        <div class="carousel-item" data-bs-interval="5000">
                            <div class="row h-100 align-items-center g-2">
                                {% for product in subcategory.limited_products|slice:"4:8" %}
                                <div class="col-sm-6 col-md-3 mb-3 mb-md-0 h-100">
                                    <div class="card card-span h-100 t ext-white"><img class="card-img"
                                                                                       src="{% static product.product_image %}"
                                                                                       alt="..."/>
                                        <div class="card-img-overlay"></div>
                                        <div class="card-body bg-200">
                                            <h5 class="fw-bold text-1000 text-truncate">{{ product.name }}</h5>
                                        </div>
                                        <p class="cart-text m-2">{{ product.description }}</p>
                                        <h6 class='m-2 text-danger'>Current price: Rs. <s>{{ product.original_price }}</s></h6>
                                        <h5 class='m-2 text-info'>Selling price: Rs. {{ product.selling_price }} </h5>
                                    </div>
                                    <a class="stretched-link" href="{% url 'product' product.id %}"></a>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}

                        {% if subcategory.limited_products|slice:"8:12" %}
                        <div class="carousel-item" data-bs-interval="3000">
                            <div class="row h-100 align-items-center g-2">
                                {% for product in subcategory.limited_products|slice:"8:12" %}
                                <div class="col-sm-6 col-md-3 mb-3 mb-md-0 h-100">
                                    <div class="card card-span h-100 t ext-white"><img class="card-img"
                                                                                       src="{% static product.product_image %}"
                                                                                       alt="..."/>
                                        <div class="card-img-overlay"></div>
                                        <div class="card-body bg-200">
                                            <h5 class="fw-bold text-1000 text-truncate">{{ product.name }}</h5>
                                        </div>
                                        <p class="cart-text m-2">{{ product.description }}</p>
                                        <h6 class='m-2 text-danger'>Current price: Rs. <s>{{ product.original_price }}</s></h6>
                                        <h5 class='m-2 text-info'>Selling price: Rs. {{ product.selling_price }} </h5>
                                    </div>
                                    <a class="stretched-link" href="{% url 'product' product.id %}"></a>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}

                        {% if subcategory.limited_products|slice:"12:16" %}
                        <div class="carousel-item">
                            <div class="row h-100 align-items-center g-2">
                                <div class="col-sm-6 col-md-3 mb-3 mb-md-0 h-100">
                                    {% for product in subcategory.limited_products|slice:"12:16" %}
                                    <div class="col-sm-6 col-md-3 mb-3 mb-md-0 h-100">
                                    <div class="card card-span h-100 t ext-white"><img class="card-img"
                                                                                       src="{% static product.product_image %}"
                                                                                       alt="..."/>
                                        <div class="card-img-overlay"></div>
                                        <div class="card-body bg-200">
                                            <h5 class="fw-bold text-1000 text-truncate">{{ product.name }}</h5>
                                        </div>
                                        <p class="cart-text m-2">{{ product.description }}</p>
                                        <h6 class='m-2 text-danger'>Current price: Rs. <s>{{ product.original_price }}</s></h6>
                                        <h5 class='m-2 text-info'>Selling price: Rs. {{ product.selling_price }} </h5>
                                    </div>
                                    <a class="stretched-link" href="{% url 'product' product.id %}"></a>
                                </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        {% if subcategory.limited_products|slice:"4:8" %}
                        <div class="row">
                            <button class="carousel-control-prev" type="button"
                                    data-bs-target="#carouselNewArrivals" data-bs-slide="prev"><span
                                    class="carousel-control-prev-icon" aria-hidden="true"></span><span
                                    class="visually-hidden">Previous</span></button>
                            <button class="carousel-control-next" type="button"
                                    data-bs-target="#carouselNewArrivals" data-bs-slide="next"><span
                                    class="carousel-control-next-icon" aria-hidden="true"></span><span
                                    class="visually-hidden">Next </span></button>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="row my-3">
                <div class="col-12 text-end">
                    <h4><a class="text-secondary" href="{% url 'subcategory_products' subcategory.category.id subcategory.id %}"><u>See more</u></a></h4>
                </div>
            </div>

        </div>
    </div>
</section>
{% endfor %}

<!--footer-->
{% include "shop/includes/footer.html" %}

{% endblock content %}
